---
# Setup cockpit and PCP for monitoring

- name: Install cockpit and related packages
  ansible.builtin.dnf:
    name:
      - cockpit
      - cockpit-networkmanager
      - cockpit-storaged
    state: present

- name: Install PCP (Performance Co-Pilot) with GUI support
  ansible.builtin.dnf:
    name:
      - pcp
      - pcp-system-tools
      - pcp-gui  # Provides Cockpit integration (replaces cockpit-pcp)
    state: present

- name: Enable and start cockpit service
  ansible.builtin.systemd:
    name: cockpit.socket
    enabled: true
    state: started

- name: Enable and start pmcd (PCP daemon)
  ansible.builtin.systemd:
    name: pmcd
    enabled: true
    state: started

- name: Enable and start pmlogger
  ansible.builtin.systemd:
    name: pmlogger
    enabled: true
    state: started
